<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <title>JSDoc: Source: kbaseInit.js</title>

    <script src="scripts/prettify/prettify.js"> </script>
    <script src="scripts/prettify/lang-css.js"> </script>
    <!--[if lt IE 9]>
      <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->
    <link type="text/css" rel="stylesheet" href="styles/prettify-tomorrow.css">
    <link type="text/css" rel="stylesheet" href="styles/jsdoc-default.css">
</head>

<body>

<div id="main">

    <h1 class="page-title">Source: kbaseInit.js</h1>

    



    
    <section>
        <article>
            <pre class="prettyprint source linenums"><code>/**
 * A little wrapper script for making sure that Narrative code 
 * is injected at the right time before loading the Notebook running
 * code.
 * 
 * Mainly, we need to load up a configuration, then make
 * sure that the other Narrative JS widgets are loaded *first*, 
 * because they're referenced from within Markdown cells at Notebook
 * load time.
 * 
 * I'm not thrilled about this, but if this isn't done, then our GUI
 * method/app/output widget cells are replaced by ReferenceErrors.
 *
 * Once this step is complete, the notebook main is run, and the
 * actual KBase Narrative startup code is instantiated in custom.js,
 * where is all ought to be. This is a ***temporary*** solution, 
 * until we migrate our Frankenstein'd markdown cells to proper
 * output cells.
 *
 * @author Bill Riehl &lt;wjriehl@lbl.gov>
 * @module narrative
 * @class narrativeMain
 * @static
 */

define([
    'jquery',
    'narrative_paths',
], function($) {
    "use strict";
    console.log('Initializing KBase config.');

    require(['narrativeConfig'], function(configDefer) {
        // The config returns a Deferrered. When that's
        // finished, inject the config into the global namespace.
        //
        // TODO: bail out if the config isn't available.
        configDefer.then(function(config) {
            if (config === null) {
                console.err('fatal error! gotta bail out here.');
                // TODO: change the view to an error/error popup/etc.
                return;
            }
            window.kbconfig = config;
            require(['narrativeLogin']);
        });
    });
});</code></pre>
        </article>
    </section>




</div>

<nav>
    <h2><a href="index.html">Home</a></h2><h3>Classes</h3><ul><li><a href="narrativeMain.html">narrativeMain</a></li></ul>
</nav>

<br class="clear">

<footer>
    Documentation generated by <a href="https://github.com/jsdoc3/jsdoc">JSDoc 3.3.2</a> on Wed Jul 22 2015 13:44:00 GMT-0700 (PDT)
</footer>

<script> prettyPrint(); </script>
<script src="scripts/linenumber.js"> </script>
</body>
</html>
